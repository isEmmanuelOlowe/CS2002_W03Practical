<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title></title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- html --> 
<meta name="src" content="W03-Exercise.tex"> 
<link rel="stylesheet" type="text/css" href="W03-Exercise.css"> 
</head><body 
>
   <div class="maketitle">
                                                                                      
                                                                                      
                                                                                      
                                                                                      

<h2 class="titleHead">Zero-weighted Exercise (0%): Introduction to C</h2>
<div class="author" ><span 
class="pplr7t-x-x-120">CS2002 - Jon Lewis </span><span 
class="pcrr7t-x-x-120">&#x003C;jon.lewis@st-andrews.ac.uk&#x003E;</span></div><br />
<div class="date" ><span 
class="pplr7t-x-x-120">Due date: Wednesday 12th February (Week 3), 21:00</span></div>
   </div>
<!--l. 16--><p class="noindent" >This exercise does not count towards your module grade. However, it is recommended that you attempt the
exercise as it gives you the opportunity to get used to the C programming language and run stacscheck over
your program developed in C.
   <h3 class="likesectionHead"><a 
 id="x1-1000"></a>Objective</h3>
     <ul class="itemize1">
     <li class="itemize">to introduce you to programming in C
     </li>
     <li class="itemize">to introduce you to running stacscheck over your program developed in C</li></ul>
<!--l. 26--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-2000"></a>Learning Outcomes</h3>
<!--l. 28--><p class="noindent" >By the end of this practical you should understand:
     <ul class="itemize1">
     <li class="itemize">writing a makefile to build your program
     </li>
     <li class="itemize">writing simple functions in C
     </li>
     <li class="itemize">how to run the automated checker on your solution written in C</li></ul>
<!--l. 37--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-3000"></a>Getting started</h3>
<!--l. 38--><p class="noindent" >To start with, you should create a suitable assignment directory such as <span 
class="pcrr7t-">CS2002/W03-Exercise </span>on the Linux
lab clients.
                                                                                      
                                                                                      
<!--l. 41--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-4000"></a>Requirements</h3>
<!--l. 42--><p class="noindent" >In this exercise, you will write a program, in three stages, to calculate a sequence of numbers called
the &#8221;Weighted Fibonacci sequence&#8221;. You will do this in two stages. You should submit a zip file
containing:
     <ul class="itemize1">
     <li class="itemize">Your  source  code,  with  a  Makefile,  which  must  be  in  a  directory  called  <span 
class="pcrr7t-">src </span>within  your
     assignment directory, for stacscheck.
     </li>
     <li class="itemize">A short report covering your design, implementation and testing, any problems encountered and
     lessons learned, as a PDF, and including the output of stacscheck for your submission.</li></ul>
<!--l. 52--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-5000"></a>A C Program to Calculate The Weighted Fibonacci Sequence</h3>
<!--l. 53--><p class="noindent" >You are expected to create correct Makefile entries for each stage. These should have correct dependencies, so if
one file is changed the correct objects are rebuilt. The directory below contains some examples which may be of
help.
<div class="center" 
>
<!--l. 56--><p class="noindent" >
<!--l. 57--><p class="noindent" ><a 
href="https://studres.cs.st-andrews.ac.uk/CS2002/Examples/" class="url" ><span 
class="pcrr7t-">https://studres.cs.st-andrews.ac.uk/CS2002/Examples/</span></a></div>
<!--l. 60--><p class="noindent" >The standard Weighted Fibonacci series begins <span 
class="cmr-10">0</span><span 
class="cmmi-10">,</span><span 
class="cmr-10">1</span>. After this, each term in the Weighted Fibonacci sequence is
generated by adding the previous term, plus twice the term before that. Therefore the third element is
<span 
class="cmr-10">0 </span><span 
class="cmsy-10">* </span><span 
class="cmr-10">2 + 1 = 1</span>, and the fourth element is <span 
class="cmr-10">1 </span><span 
class="cmsy-10">* </span><span 
class="cmr-10">2 + 1 = 3</span>.
<!--l. 64--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-6000"></a>Stage 1: Recursive Calculation</h4>
<!--l. 66--><p class="noindent" >1) Write a function <span 
class="pcrr7t-">int fibcalc(int n) </span>to calculate the Weighted Fibonacci of <span 
class="cmmi-10">n </span>recursively.
This function should return 0 for <span 
class="pcrr7t-">fibcalc(0)</span>, 1 for <span 
class="pcrr7t-">fibcalc(1)</span>, and calculate other values
recursively.
<!--l. 68--><p class="noindent" >You should put the function implementation in a source code file called <span 
class="pcrr7t-">recursive</span><span 
class="pcrr7t-">_fib.c </span>and the
function prototype in a header file called <span 
class="pcrr7t-">fib.h</span>, to <span 
class="pcrr7t-">#include </span>in the files that need to use the
function.
<!--l. 72--><p class="noindent" >2) Write a function <span 
class="pcrr7t-">void print</span><span 
class="pcrr7t-">_fib() </span>in a new file, <span 
class="pcrr7t-">print</span><span 
class="pcrr7t-">_fib.c </span>and once again put the function
declaration (prototype) into a file <span 
class="pcrr7t-">print</span><span 
class="pcrr7t-">_fib.h</span>. Your <span 
class="pcrr7t-">void print</span><span 
class="pcrr7t-">_fib </span>function should:
     <ul class="itemize1">
     <li class="itemize">Print the prompt, <span 
class="pcrr7t-">Length?</span>
     </li>
     <li class="itemize">Read an integer n from the user
     </li>
     <li class="itemize">Print the first n elements of the Weighted Fibonacci sequence, using the <span 
class="pcrr7t-">fibcalc </span>function.</li></ul>
<!--l. 81--><p class="noindent" >For example, with input &#8217;7&#8217; your program&#8217;s output should look like the following (where the &#8217;7&#8217; is entered by
the user). Note the list consists of a space after each comma. Empty lists should be denoted as
&#8221;[]&#8221;.
                                                                                      
                                                                                      
   <div class="verbatim" id="verbatim-1">
Length?&#x00A0;7
&#x00A0;<br />[0,&#x00A0;1,&#x00A0;1,&#x00A0;3,&#x00A0;5,&#x00A0;11,&#x00A0;21]
</div>
<!--l. 87--><p class="nopar" >
<!--l. 89--><p class="noindent" >You are not required to check whether user input is valid.
<!--l. 92--><p class="noindent" >3) Write a main function in a new file <span 
class="pcrr7t-">run</span><span 
class="pcrr7t-">_fib.c</span>. Your main function merely needs to call <span 
class="pcrr7t-">print</span><span 
class="pcrr7t-">_fib</span>.
<!--l. 95--><p class="noindent" >4) Write a makefile, building an executable called &#8221;stage1&#8221; from your three <span 
class="pcrr7t-">.c </span>files. Be sure to get the
dependencies right. Your Makefile should also have a target &#8217;clean&#8217;, which removes any binary or object
files.
<!--l. 98--><p class="noindent" >5) You should test your program using stacscheck. To do this you should:
     <ul class="itemize1">
     <li class="itemize">Name your assignment directory <span 
class="pcrr7t-">W03-Exercise</span>
     </li>
     <li class="itemize">Make sure <span 
class="pcrr7t-">make clean </span>works. <span 
class="pcrr7t-">make stage1 </span>should work and produce an executable called
     <span 
class="pcrr7t-">stage1</span>.
     </li>
     <li class="itemize">From inside your <span 
class="pcrr7t-">W03-Exercise</span>, run from a lab machine: <br 
class="newline" /><span 
class="pcrr7t-">stacscheck /cs/studres/CS2002/Practicals/W03-Exercise/Tests</span></li></ul>
<!--l. 107--><p class="noindent" >At this stage of the practical, the &#8217;build-clean&#8217; and &#8217;stage1&#8217; tests should pass. We will work on the &#8217;stage2&#8217; and
&#8217;invalid-input&#8217; tests in later parts.
<!--l. 110--><p class="noindent" >If nothing is working and you don&#8217;t know why, please don&#8217;t suffer in silence, ask one of the demonstrators in
the lab.
<!--l. 113--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-7000"></a>Stage 2: Iterative Calculation</h4>
<!--l. 115--><p class="noindent" >1) In a new file <span 
class="pcrr7t-">iterative</span><span 
class="pcrr7t-">_fib.c</span>, write a new function that calculates the Weighted Fibonacci of a variable
iteratively, rather than recursively. In particular, this function should only calculate the fib of each
value at most once for a given input. Give this function the same prototype as your original fib
function.
<!--l. 117--><p class="noindent" >2) Add a rule to your Makefile which builds a new executable, <span 
class="pcrr7t-">stage2</span>, using this new function, by linking the
output from compiling <span 
class="pcrr7t-">run</span><span 
class="pcrr7t-">_fib.c</span>, <span 
class="pcrr7t-">print</span><span 
class="pcrr7t-">_fib.c </span>and <span 
class="pcrr7t-">iterative</span><span 
class="pcrr7t-">_fib.c</span>.
<!--l. 121--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-8000"></a>Optional Checking input</h4>
<!--l. 123--><p class="noindent" >Modify the files used in Stage 2 so your program never misbehaves for any inputs. Discuss the things you
check for, and how you check.
<!--l. 125--><p class="noindent" >If your program detects an invalid input from the user, it should print <span 
class="pcrr7t-">"Invalid input</span><span 
class="cmsy-10">\</span><span 
class="pcrr7t-">n"</span>, then call &#8217;exit&#8217;. If
it detects an overflow, it should print <span 
class="pcrr7t-">"Overflow</span><span 
class="cmsy-10">\</span><span 
class="pcrr7t-">n"</span>, then call &#8217;exit&#8217;.
<!--l. 128--><p class="noindent" >Some hints:
     <ul class="itemize1">
     <li class="itemize">Don&#8217;t assume long is bigger than int (you can assume int is at least 32 bits, and long long is at least
     64 bits, if you wish)
                                                                                      
                                                                                      
     </li>
     <li class="itemize">You should reject negative inputs in all places.
     </li>
     <li class="itemize">It is undefined behaviour to overflow an int.
     </li>
     <li class="itemize">Read the documentation of <span 
class="pcrr7t-">scanf </span>(type <span 
class="pcrr7t-">man scanf </span>at the command line, or consult the web) to
     find out how to check the return value of scanf to see if there was an error.</li></ul>
<!--l. 136--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-9000"></a>Deliverables</h3>
<!--l. 138--><p class="noindent" >Hand in via MMS, by the deadline of 9pm on Wednesday of Week 3, a zip file containing your
assignment directory in which there is a <span 
class="pcrr7t-">src </span>directory containing all source code files and your PDF
report.
<!--l. 141--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-10000"></a>Marking</h3>
<!--l. 142--><p class="noindent" >The submission does not count towards your module grade and you will not receive a mark on
MMS. However, we will upload the output from the automated checker for all our tests to MMS.
<br 
class="newline" />
<!--l. 144--><p class="noindent" >I would remind you to ensure you are following the relevant guidelines on good academic practice as outlined
at
<div class="center" 
>
<!--l. 145--><p class="noindent" >
<!--l. 146--><p class="noindent" ><a 
href="https://www.st-andrews.ac.uk/students/rules/academicpractice/" class="url" ><span 
class="pcrr7t-">https://www.st-andrews.ac.uk/students/rules/academicpractice/</span></a></div>
    
</body></html> 

                                                                                      


